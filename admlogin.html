<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{
            font-family: Arial, Helvetica, sans-serif;
            background: linear-gradient(135deg,#2d5a27,#1a3c15);
            height:100vh;
            display:flex;
            justify-content:center;
            align-items:center;
        }
        .card{
            width:360px;
            background:#ffffff;
            padding:28px 26px;
            border-radius:14px;
            box-shadow:0 10px 26px rgba(0,0,0,0.35);
        }
        .title{
            text-align:center;
            margin-bottom:4px;
            font-size:22px;
            font-weight:700;
            color:#1a3c15;
        }
        .subtitle{
            text-align:center;
            font-size:12px;
            color:#666;
            margin-bottom:18px;
            letter-spacing:0.5px;
            text-transform:uppercase;
        }
        .input-group{
            margin-bottom:14px;
        }
        label{
            display:block;
            font-size:13px;
            font-weight:600;
            margin-bottom:6px;
            color:#1a3c15;
        }
        input{
            width:100%;
            padding:9px 10px;
            border:2px solid #dde2e6;
            border-radius:7px;
            font-size:14px;
            transition:border-color .2s, box-shadow .2s;
        }
        input:focus{
            outline:none;
            border-color:#2d5a27;
            box-shadow:0 0 0 2px rgba(45,90,39,0.18);
        }
        .btn{
            width:100%;
            padding:11px;
            border:none;
            border-radius:8px;
            background:#2d5a27;
            color:#fff;
            font-size:15px;
            font-weight:600;
            cursor:pointer;
            margin-top:6px;
            transition:background .2s, transform .1s, box-shadow .2s;
        }
        .btn:hover{
            background:#1a3c15;
            transform:translateY(-1px);
            box-shadow:0 8px 18px rgba(0,0,0,0.3);
        }
        .error{
            margin-top:6px;
            color:#c62828;
            font-size:12px;
            display:none;
        }
        .row{
            display:flex;
            gap:10px;
        }
        .row .input-group{
            flex:1;
        }
    </style>
</head>
<body>

<div class="card">
    <h1 class="title">Admin Login</h1>
    <p class="subtitle">System Control Access</p>

    <p id="adminError" class="error"></p>

    <div class="row">
        <div class="input-group">
            <label for="adminId">Admin ID</label>
            <input type="text" id="adminId" placeholder="ADM-001">
        </div>
        <div class="input-group">
            <label for="adminEmail">Email</label>
            <input type="email" id="adminEmail" placeholder="admin@example.com">
        </div>
    </div>

    <div class="input-group">
        <label for="adminPassword">Password</label>
        <input type="password" id="adminPassword" placeholder="••••••••">
    </div>

    <button class="btn" id="loginBtn" onclick="adminLogin()">Login</button>
</div>

<script>
    const API_URL = 'http://localhost:5000';

    function showError(msg){
        const el = document.getElementById('adminError');
        el.innerText = msg;
        el.style.display = 'block';
    }

    async function adminLogin(){
        document.getElementById('adminError').style.display = 'none';

        const adminId = document.getElementById('adminId').value.trim();
        const email   = document.getElementById('adminEmail').value.trim();
        const password= document.getElementById('adminPassword').value.trim();

        if(!adminId || !email || !password){
            showError('Admin ID, email and password are required.');
            return;
        }

        const btn = document.getElementById('loginBtn');
        btn.disabled = true;
        btn.innerText = 'Checking...';

        try{
            const res = await fetch(`${API_URL}/api/admin/login`,{
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body:JSON.stringify({ adminId, email, password })
            });
            const data = await res.json();

            if(res.ok && data.success){
                localStorage.setItem('adminEmail', data.email || email);
                localStorage.setItem('adminToken', data.token || '');
                window.location.href = 'admindashboard.html';
            }else{
                showError(data.message || 'Invalid admin credentials.');
                btn.disabled = false;
                btn.innerText = 'Login';
            }
        }catch(err){
            console.error('Admin login error:', err);
            showError('Server error. Try again.');
            btn.disabled = false;
            btn.innerText = 'Login';
        }
    }
</script>

</body>
</html>
